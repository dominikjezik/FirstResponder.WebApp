@{
    ViewBag.Title = "Prehľad AED";
}

<header class="main-header">
    <h1>Rozmiestnenie defibrilátorov</h1>
</header>

<div class="filter-table-form" style="opacity: 0.2;">
    <div class="field">
        <label class="label">Podľa&nbsp;držateľa</label>
        <div class="control">
            <input class="input" type="text">
        </div>
    </div>
    
    <div class="field">
            <label class="label">Podľa&nbsp;kraju</label>
            <div class="control">
                <div class="select">
                    <select>
                        <option>-</option>
                        <option>Trenčiansky kraj</option>
                    </select>
                </div>
            </div>
        </div>
    
    <div class="field">
        <label class="label">Podľa&nbsp;stavu</label>
        <div class="control">
            <div class="select">
                <select>
                    <option>-</option>
                    <option>Registrovaný</option>
                    <option>Pripravený</option>
                    <option>Nepripravený</option>
                    <option>Mimo prevádzky</option>
                    <option>Servisný zásah</option>
                    <option>Zrušený</option>
                </select>
            </div>
        </div>
    </div>
    
    <div class="field">
        <label class="label">Podľa&nbsp;výrobcu</label>
        <div class="control">
            <div class="select">
                <select>
                    <option>-</option>
                </select>
            </div>
        </div>
    </div>
    
    <div class="field">
        <label class="label">Podľa&nbsp;modelu</label>
        <div class="control">
            <div class="select">
                <select>
                    <option>-</option>
                </select>
            </div>
        </div>
    </div>
    
    <div class="field">
        <label class="label">Podľa&nbsp;sériového&nbsp;čísla</label>
        <div class="control">
            <input class="input" type="text">
        </div>
    </div>
</div>

<div id="map" style="height: 600px"></div>

@section StyleSheets
{
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
}

@section Scripts
{
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        let map = L.map('map').setView([48.684, 19.677], 7);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        
        @foreach (var aed in Model)
        {
            if (@aed.Latitude != null && @aed.Longitude != null)
            {
                <text>
                    L.marker([@aed.Latitude.ToString().Replace(",", "."), @aed.Longitude.ToString().Replace(",", ".")], {
                        icon: L.divIcon({
                            className: '',
                            iconAnchor: [12.5, 40],
                            html: `<svg class="aed-icon-@aed.State.ToString()" th="25" height="40" viewBox="0 0 25 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                                       <path d="M11.0075 0.0700632C9.62925 0.227349 7.94368 0.725421 6.67073 1.3633C4.57256 2.42062 2.55339 4.40417 1.40334 6.53627C-0.0188515 9.17519 -0.396348 12.5743 0.437655 15.388C0.938057 17.0832 2.23735 19.4949 4.66912 23.2086C7.28526 27.2282 8.03147 28.4777 9.24297 30.9069C10.5949 33.6157 11.4202 35.8003 12.1488 38.6401C12.3595 39.4528 12.5526 40.0645 12.5702 39.9946C12.5965 39.9247 12.7194 39.4091 12.8511 38.8586C13.3954 36.4993 14.5191 33.441 15.7219 31.038C16.9597 28.5826 17.9781 26.8786 20.5854 22.9115C21.9637 20.8056 22.3324 20.1852 23.3069 18.2716C24.5184 15.8948 24.8783 14.7239 24.9837 12.784C25.2207 8.31885 22.8592 3.99348 18.9525 1.72157C16.6612 0.393374 13.7027 -0.218295 11.0075 0.0700632Z" fill="white"/>
                                       <path d="M11.083 0.6961C9.7745 0.844717 8.17429 1.31534 6.96579 1.91806C4.97385 2.9171 3.05692 4.79132 1.9651 6.80591C0.614915 9.29937 0.256533 12.5111 1.04831 15.1697C1.52337 16.7715 2.75688 19.0503 5.06553 22.5593C7.5492 26.3573 8.25763 27.538 9.40779 29.8333C10.6913 32.3928 11.4747 34.4569 12.1665 37.1403C12.3665 37.9081 12.5499 38.4861 12.5666 38.42C12.5916 38.354 12.7082 37.8668 12.8333 37.3467C13.35 35.1174 14.4168 32.2277 15.5586 29.9571C16.7338 27.637 17.7006 26.027 20.1759 22.2786C21.4844 20.2888 21.8345 19.7026 22.7596 17.8944C23.9098 15.6486 24.2515 14.5422 24.3515 12.7093C24.5765 8.49023 22.3346 4.40327 18.6257 2.25658C16.4504 1.00159 13.6417 0.423636 11.083 0.6961Z" fill="currentColor"/>
                                       <path fill-rule="evenodd" clip-rule="evenodd" d="M4.24427 12.1847C3.52008 8.66747 5.92469 6.00935 8.62324 5.9847C10.0101 5.96353 11.745 6.69329 12.6696 8.45616C13.5943 6.69329 15.3291 5.96353 16.7161 5.9847C19.4146 6.00935 21.8192 8.66747 21.095 12.1847C20.543 14.8659 17.6742 18.3526 12.6696 21.7323C7.66508 18.3526 4.79632 14.8659 4.24427 12.1847ZM9.74907 16.6282L10.6676 6.95791C11.2992 7.32044 11.8819 7.87383 12.2909 8.65357L12.508 9.06762L11.4718 13.8718L15.3824 11.0546L13.6597 18.8116H14.6734L12.6449 21.0557L11.4354 18.2502L12.4492 18.6045L13.0116 14.2869L9.74907 16.6282Z" fill="white"/>
                                   </svg>`
                        })
                    }).on('click', function() {
                        window.location = '@Url.Action("Edit", "Aed", new { aedId = aed.Id })';
                    }).addTo(map)
                </text>
            }
        }
        
    </script>
}

